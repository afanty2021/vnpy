[æ ¹ç›®å½•](../../../CLAUDE.md) > [vnpy](../../) > **alpha**

# Alpha - AIé‡åŒ–ç ”ç©¶æ¨¡å—

> æ›´æ–°æ—¶é—´ï¼š2025-12-09 11:33:34

## æ¨¡å—èŒè´£

Alphaæ¨¡å—æ˜¯VeighNa 4.0ç‰ˆæœ¬é‡ç£…æ¨å‡ºçš„AIé‡åŒ–ç ”ç©¶åŠŸèƒ½ï¼Œä¸ºä¸“ä¸šé‡åŒ–äº¤æ˜“å‘˜æä¾›ä¸€ç«™å¼å¤šå› å­æœºå™¨å­¦ä¹ ç­–ç•¥å¼€å‘ã€æŠ•ç ”å’Œå®ç›˜äº¤æ˜“è§£å†³æ–¹æ¡ˆã€‚è¯¥æ¨¡å—é›†æˆäº†æ•°æ®ç®¡ç†ã€ç‰¹å¾å·¥ç¨‹ã€æ¨¡å‹è®­ç»ƒã€ç­–ç•¥å›æµ‹ç­‰å®Œæ•´å·¥ä½œæµç¨‹ã€‚

## å…¥å£ä¸å¯åŠ¨

### ä¸»è¦å…¥å£
- `AlphaLab` - æŠ•ç ”å®éªŒå®¤ï¼Œç®¡ç†å®Œæ•´å·¥ä½œæµ
- `AlphaDataset` - æ•°æ®é›†æ¨¡æ¿ï¼Œæ”¯æŒç‰¹å¾å·¥ç¨‹
- `AlphaModel` - æ¨¡å‹æ¨¡æ¿ï¼Œæ”¯æŒå¤šç§MLç®—æ³•
- `AlphaStrategy` - ç­–ç•¥æ¨¡æ¿ï¼ŒåŸºäºMLä¿¡å·

### å¿«é€Ÿå¼€å§‹
```python
from vnpy.alpha import AlphaLab, AlphaDataset, AlphaModel

# åˆ›å»ºæŠ•ç ”å®éªŒå®¤
lab = AlphaLab("./lab_data")

# åŠ è½½æ•°æ®é›†
dataset = AlphaDataset(
    df=data_df,
    train_period=("2020-01-01", "2022-12-31"),
    valid_period=("2023-01-01", "2023-06-30"),
    test_period=("2023-07-01", "2023-12-31")
)

# è®­ç»ƒæ¨¡å‹
model = AlphaModel(dataset)
model.train_model("lgb")

# ç”Ÿæˆç­–ç•¥
strategy = AlphaStrategy(model)
```

## å¯¹å¤–æ¥å£

### AlphaLabæ¥å£
- `load_data()` - åŠ è½½å†å²æ•°æ®
- `save_dataset()` - ä¿å­˜æ•°æ®é›†
- `train_model()` - è®­ç»ƒé¢„æµ‹æ¨¡å‹
- `generate_signal()` - ç”Ÿæˆäº¤æ˜“ä¿¡å·
- `backtest_strategy()` - ç­–ç•¥å›æµ‹

### AlphaDatasetæ¥å£
- `load_df()` - åŠ è½½DataFrameæ•°æ®
- `add_expression()` - æ·»åŠ ç‰¹å¾è¡¨è¾¾å¼
- `calculate_features()` - è®¡ç®—ç‰¹å¾
- `get_feature_names()` - è·å–ç‰¹å¾åç§°
- `split_data()` - åˆ’åˆ†è®­ç»ƒ/éªŒè¯/æµ‹è¯•é›†

### AlphaModelæ¥å£
- `train_model()` - è®­ç»ƒæŒ‡å®šç±»å‹çš„æ¨¡å‹
- `predict()` - é¢„æµ‹æ”¶ç›Šç‡
- `evaluate()` - è¯„ä¼°æ¨¡å‹æ€§èƒ½
- `get_feature_importance()` - è·å–ç‰¹å¾é‡è¦æ€§

### AlphaStrategyæ¥å£
- `on_init()` - ç­–ç•¥åˆå§‹åŒ–
- `on_tick()` - Tickæ•°æ®å¤„ç†
- `on_bar()` - Kçº¿æ•°æ®å¤„ç†
- `calculate_signal()` - è®¡ç®—äº¤æ˜“ä¿¡å·

## å…³é”®ä¾èµ–ä¸é…ç½®

### æ ¸å¿ƒä¾èµ–
- `polars` - é«˜æ€§èƒ½æ•°æ®å¤„ç†æ¡†æ¶
- `pandas` - æ•°æ®åˆ†æåº“
- `numpy` - æ•°å€¼è®¡ç®—
- `scikit-learn` - æœºå™¨å­¦ä¹ åº“
- `lightgbm` - æ¢¯åº¦æå‡ç®—æ³•
- `torch` - æ·±åº¦å­¦ä¹ æ¡†æ¶
- `alphalens-reloaded` - å› å­åˆ†æå·¥å…·
- `scipy` - ç§‘å­¦è®¡ç®—
- `pyarrow` - æ•°æ®å­˜å‚¨æ ¼å¼

### æ•°æ®è·¯å¾„ç»“æ„
```
lab_path/
â”œâ”€â”€ daily/          # æ—¥çº¿æ•°æ®
â”œâ”€â”€ minute/         # åˆ†é’Ÿçº¿æ•°æ®
â”œâ”€â”€ component/      # æˆåˆ†è‚¡æ•°æ®
â”œâ”€â”€ dataset/        # å¤„ç†åçš„æ•°æ®é›†
â”œâ”€â”€ model/          # è®­ç»ƒå¥½çš„æ¨¡å‹
â”œâ”€â”€ signal/         # äº¤æ˜“ä¿¡å·
â””â”€â”€ contract.json   # åˆçº¦ä¿¡æ¯
```

## æ•°æ®æ¨¡å‹

### å› å­æ•°æ®é›†
- **Alpha 158**ï¼šæºè‡ªå¾®è½¯Qlibé¡¹ç›®çš„158ä¸ªç»å…¸å› å­
- **æ—¶åºå› å­**ï¼šåŸºäºæ—¶é—´åºåˆ—çš„åŠ¨é‡ã€åè½¬ç­‰å› å­
- **æˆªé¢å› å­**ï¼šåŸºäºæ¨ªæˆªé¢æ¯”è¾ƒçš„ä¼°å€¼ã€æˆé•¿ç­‰å› å­
- **æŠ€æœ¯å› å­**ï¼šåŸºäºæŠ€æœ¯æŒ‡æ ‡çš„å„ç±»å› å­

### æ”¯æŒçš„æ¨¡å‹ç±»å‹
- **Lassoå›å½’**ï¼šçº¿æ€§æ¨¡å‹ï¼Œç”¨äºç‰¹å¾é€‰æ‹©
- **LightGBM**ï¼šé«˜æ•ˆæ¢¯åº¦æå‡æ ‘ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®
- **MLP**ï¼šå¤šå±‚æ„ŸçŸ¥æœºï¼Œé€‚ç”¨äºéçº¿æ€§å…³ç³»

### æ•°æ®å‘¨æœŸ
- æ”¯æŒæ—¥çº¿ã€åˆ†é’Ÿçº¿ç­‰å¤šä¸ªæ—¶é—´å‘¨æœŸ
- æ”¯æŒå¢é‡æ•°æ®æ›´æ–°ï¼ˆappendæ¨¡å¼ï¼‰
- è‡ªåŠ¨å¤„ç†äº¤æ˜“æ—¥å†å’Œæˆåˆ†è‚¡å˜åŒ–

## æµ‹è¯•ä¸è´¨é‡

### ç¤ºä¾‹Notebook
- `download_data_rq.ipynb` - ä½¿ç”¨RQDataä¸‹è½½æ•°æ®
- `download_data_xt.ipynb` - ä½¿ç”¨è¿…æŠ•ç ”ä¸‹è½½æ•°æ®
- `research_workflow_lasso.ipynb` - Lassoæ¨¡å‹ç ”ç©¶æµç¨‹
- `research_workflow_lgb.ipynb` - LightGBMæ¨¡å‹ç ”ç©¶æµç¨‹
- `research_workflow_mlp.ipynb` - MLPæ¨¡å‹ç ”ç©¶æµç¨‹

### è´¨é‡ä¿è¯
- ä½¿ç”¨Polarsè¿›è¡Œé«˜æ€§èƒ½æ•°æ®å¤„ç†
- å†…ç½®æ•°æ®æ¸…æ´—å’Œå¼‚å¸¸å€¼å¤„ç†
- æ”¯æŒæ»šåŠ¨çª—å£å›æµ‹
- æä¾›å¯è§†åŒ–åˆ†æå·¥å…·

## å¸¸è§é—®é¢˜ (FAQ)

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰å› å­ï¼Ÿ
A: é€šè¿‡`add_expression()`æ–¹æ³•æ·»åŠ å› å­è¡¨è¾¾å¼ï¼Œæˆ–ç›´æ¥åœ¨Polars DataFrameä¸Šè®¡ç®—ã€‚

### Q: å¦‚ä½•å¤„ç†å¤§è§„æ¨¡æ•°æ®ï¼Ÿ
A: æ¨èä½¿ç”¨Polarsçš„lazy modeè¿›è¡Œå»¶è¿Ÿè®¡ç®—ï¼Œæˆ–åˆ†æ‰¹å¤„ç†æ•°æ®ã€‚

### Q: æ¨¡å‹è®­ç»ƒå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
A: å¯ä»¥å°è¯•ï¼š1ï¼‰å‡å°‘ç‰¹å¾æ•°é‡ 2ï¼‰ä½¿ç”¨LightGBMæ›¿ä»£æ·±åº¦å­¦ä¹  3ï¼‰å¯ç”¨GPUåŠ é€Ÿ

### Q: å¦‚ä½•å°†å› å­é›†æˆåˆ°ç°æœ‰ç­–ç•¥ï¼Ÿ
A: ä½¿ç”¨AlphaStrategyæ¨¡æ¿ï¼Œæˆ–é€šè¿‡get_signal()æ–¹æ³•åœ¨è‡ªå®šä¹‰ç­–ç•¥ä¸­è°ƒç”¨ã€‚

## ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `__init__.py` - æ¨¡å—å¯¼å‡º
- `lab.py` - AlphaLabæŠ•ç ”å®éªŒå®¤
- `logger.py` - æ—¥å¿—ç®¡ç†

### Datasetå­æ¨¡å—
- `dataset/__init__.py` - æ•°æ®é›†æ¨¡å—å¯¼å‡º
- `dataset/template.py` - AlphaDatasetæ¨¡æ¿ç±»
- `dataset/utility.py` - å·¥å…·å‡½æ•°
- `dataset/ts_function.py` - æ—¶åºå‡½æ•°
- `dataset/cs_function.py` - æˆªé¢å‡½æ•°
- `dataset/ta_function.py` - æŠ€æœ¯åˆ†æå‡½æ•°
- `dataset/processor.py` - æ•°æ®å¤„ç†å™¨
- `datasets/alpha_158.py` - Alpha 158å› å­é›†

### Modelå­æ¨¡å—
- `model/__init__.py` - æ¨¡å‹æ¨¡å—å¯¼å‡º
- `model/template.py` - AlphaModelæ¨¡æ¿ç±»
- `models/lasso_model.py` - Lassoå›å½’æ¨¡å‹
- `models/lgb_model.py` - LightGBMæ¨¡å‹
- `models/mlp_model.py` - MLPç¥ç»ç½‘ç»œæ¨¡å‹

### Strategyå­æ¨¡å—
- `strategy/__init__.py` - ç­–ç•¥æ¨¡å—å¯¼å‡º
- `strategy/template.py` - AlphaStrategyæ¨¡æ¿ç±»
- `strategy/backtesting.py` - å›æµ‹å¼•æ“
- `strategies/equity_demo_strategy.py` - æ¼”ç¤ºç­–ç•¥

## å˜æ›´è®°å½• (Changelog)

### 2025-12-09 11:33:34
- âœ¨ åˆ›å»ºalphaæ¨¡å—æ–‡æ¡£
- ğŸ“Š æ•´ç†AIé‡åŒ–ç ”ç©¶å·¥ä½œæµç¨‹
- ğŸ”§ æ¢³ç†æ•°æ®é›†ã€æ¨¡å‹å’Œç­–ç•¥æ¥å£
- ğŸ“ æ·»åŠ FAQå’Œæœ€ä½³å®è·µæŒ‡å—

---

*æç¤ºï¼šè¯¥æ¨¡å—çš„è®¾è®¡ç†å¿µå—åˆ°å¾®è½¯Qlibé¡¹ç›®çš„å¯å‘ï¼Œåœ¨ä¿æŒæ˜“ç”¨æ€§çš„åŒæ—¶æä¾›å¼ºå¤§çš„AIé‡åŒ–èƒ½åŠ›ã€‚*